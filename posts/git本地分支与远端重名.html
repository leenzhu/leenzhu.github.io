<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="leen"><meta name=description content="今天遇到一个git名字ambiguous的问题。
warning: refname &amp;lsquo;origin/master&amp;rsquo; is ambiguous.
"><meta name=keywords content="git"><link rel=canonical href=https://leenzhu.com/posts/git%E6%9C%AC%E5%9C%B0%E5%88%86%E6%94%AF%E4%B8%8E%E8%BF%9C%E7%AB%AF%E9%87%8D%E5%90%8D.html><title>git本地分支与远端重名 &#183; Leen Zhu</title><link rel="shortcut icon" href=/image/logo.png><link rel=stylesheet href=/css/normalize.css><link rel=stylesheet href=/css/chroma.css><link rel=stylesheet href=/scss/sun.min.173be92a65a018529d78026ec3240959d2a3dd35b070c391cad265c861d20173.css integrity="sha256-FzvpKmWgGFKdeAJuwyQJWdKj3TWwcMORytJlyGHSAXM=" crossorigin=anonymous></head><body><div class=main><header class="header clearfix"><a href=/ class=site-logo><img src=/image/logo.png></img></a><div class=site-info><h1 class=site-name><a href=/>Leen Zhu</a></h1><p class=site-description>while(life--) money++;</p></div><nav class=site-nav><a href=/>首页</a>
<a href=/posts.html>归档</a>
<a href=/categories.html>分类</a>
<a href=/tags.html>标签</a>
<a href=/about.html>关于</a></nav></header><div class=content><div class=post-page><div class=print-url>https://leenzhu.com/posts/git%E6%9C%AC%E5%9C%B0%E5%88%86%E6%94%AF%E4%B8%8E%E8%BF%9C%E7%AB%AF%E9%87%8D%E5%90%8D.html</div><h1><a href=/posts/git%E6%9C%AC%E5%9C%B0%E5%88%86%E6%94%AF%E4%B8%8E%E8%BF%9C%E7%AB%AF%E9%87%8D%E5%90%8D.html>git本地分支与远端重名</a></h1><div class=post-meta><span class=date>2023-07-26</span>
<span class="field tags"><a class=tag href=https://leenzhu.com/tags/git.html>#git</a></span></div><hr><div class=post-content><p>今天遇到一个git名字ambiguous的问题。</p><blockquote><p>warning: refname &lsquo;origin/master&rsquo; is ambiguous.</p></blockquote><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>git checkout -b newb origin/master
</span></span><span style=display:flex><span>warning: refname <span style=color:#4070a0>&#39;origin/master&#39;</span> is ambiguous.
</span></span></code></pre></div><p>正常来说，这名字应该不会有歧义。通过<code>git show-ref</code>命令查看：</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ git show-ref origin/master
</span></span><span style=display:flex><span>b73e1c8fd21c28926884c8ac61d0666172930fef refs/heads/origin/master <span style=color:#666>(</span>wrong one<span style=color:#666>)</span>
</span></span><span style=display:flex><span>aea283f55e75242cf57134c824e05007df4fab06 refs/remotes/origin/master
</span></span></code></pre></div><p>原来是有一个本地分支名称被命名称<code>origin/master</code>了。这样当引用<code>origin/master</code>时，<code>git</code>f就无法确定是要用本地分支<code>origin/master</code>还是<code>origin</code>命名空间下的<code>master</code>分支。</p><p>实际上这个本地分支<code>origin/master</code>是被错误的创建的，所以只需要简单的将其删除即可。</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>git branch -d origin/master
</span></span></code></pre></div><p>上命的命令是可以正常工作的，没有报<code>ambiguous</code>的错误，大概是因为<code>remote</code>命名空间下的分支不能通过这个命令删除。所以这个命令才正常工作吧。</p><p>另外想精确的指定这个<code>origin/master</code>分支，可以通过<code>git update-ref</code>这个命令来实现：</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ git update-ref -d refs/heads/origin/master
</span></span></code></pre></div><blockquote><p>注：本地分支都是在<code>heads</code>命名空间下的。</p></blockquote></div><div class=page-nav><a href=/posts/round_pow2-%E5%87%BD%E6%95%B0%E5%88%86%E6%9E%90.html class="nav-btn page-next">round_pow2 函数分析</a>
<a href=/posts/git-branch-points-at.html class="nav-btn page-prev">git 根据commit反查branch、tag名</a></div><div class=comment style=clear:both;margin-top:5em></div></div></div></div><div class=footer><div class=copyright>@2019 <a href=https://leenzhu.com>LeenZhu</a></div><div class=powered_by>Power by <a href=http://www.gohugo.io/>Hugo</a>,
using <a href=https://github.com/leenzhu/hugo-theme-sun>Sun</a> Theme</div></div></body></html>